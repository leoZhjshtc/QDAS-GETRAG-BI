<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ include file="../meta.jsp" %>
<html>
<head>
</head>
<body>
<table style="height: 100%;width: 100%;background-image: url(<%=basePath%>resources/images/chejianbg.png); background-size: cover;">
    <tr style="height: 10%;">
        <td>
            <div class="tdblock">
                <div class="innerNoData" id="machine1">
                    <div class="divTitle">
                        <p>OP290超精</p>
                        <p>038-004</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData" id="machine2">
                    <div class="divTitle">
                        <p>OP250珩齿</p>
                        <p>057-009</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData" id="machine3">
                    <div class="divTitle">
                        <p>OP290超精</p>
                        <p>038-005</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData" id="machine4">
                    <div class="divTitle">
                        <p>OP250珩齿</p>
                        <p>057-005</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData" id="machine5">
                    <div class="divTitle">
                        <p>OP290超精</p>
                        <p>038-003</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData" id="machine6">
                    <div class="divTitle">
                        <p>OP250珩齿</p>
                        <p>057-006</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData" id="machine7">
                    <div class="divTitle">
                        <p>OP250珩齿</p>
                        <p>057-004</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData" id="machine8">
                    <div class="divTitle">
                        <p>OP250珩齿</p>
                        <p>057-008</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP250珩齿</p>
                        <p>057-010</p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <tr style="height: 10%;">
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP200磨外圆</p>
                        <p>003-018</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP200磨外圆</p>
                        <p>003-019</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP200磨外圆</p>
                        <p>003-017</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP200磨外圆</p>
                        <p>003-020</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP200磨外圆</p>
                        <p>003-021</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP200磨外圆</p>
                        <p>003-022</p>
                    </div>
                </div>
            </div>
        </td>
        <td>
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP200磨外圆</p>
                        <p>003-023</p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData" style="background-color: rgba(225, 227, 97, 0.5)">
                    <div class="divTitle">
                        <p>班组天地</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP80搓丝</p>
                        <p>005-038</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-031</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-020</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2" rowspan="8">
            <div class="blank">
                <div class="text">300<br/>齿<br/>轴<br/>区<br/>域</div>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-040</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-028</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-013</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-025</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-030</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-021</p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP35清洗</p>
                        <p>947-014</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-015</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-024</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-023</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-022</p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-039</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-027</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP80搓丝</p>
                        <p>005-037</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-019</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-043</p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-029</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-042</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2" rowspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP35清洗</p>
                        <p>947-008</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-026</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-015</p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-024</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-025</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-027</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-024</p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-037</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP20精车</p>
                        <p>001-026</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-017</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="1">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP60滚齿</p>
                        <p>005-028</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-032</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-044p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP35清洗</p>
                        <p>947-007</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP80搓丝</p>
                        <p>005-036</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP90深钻孔</p>
                        <p>021-003</p>
                    </div>
                </div>
            </div>
        </td>
        <td colspan="2">
            <div class="tdblock">
                <div class="innerNoData">
                    <div class="divTitle">
                        <p>OP105车铣</p>
                        <p>001-033</p>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</table>
<link rel="stylesheet" type="text/css" href="<%=basePath %>resources/css/workshop.css"/>
<script type="text/javascript">
    $(function () {
        getProductLineData()
    })
    function getProductLineData() {
        $.ajax({
            type:'post',
            data:{
                startTime:startTime,
                endTime:endTime
            },
            url:'<%=basePath%>gqb/getMachineData',
            beforeSend:function(){
                initLoading('qbCenterPlPanel', 'loadingWs1');
            },
            success:function (data) {
                if(data.length>0){
                    for(var i=0;i<data.length;i++){
                        var machineId = data[i].WVMASCHINE;
                        var qflag=0;
                        for (var j = 0; j < data[i].wvList.length; j++) {
                            if (data[i].wvList[j].MEMERKART == '1') {
                                if (data[i].wvList[j].WVWERT.toString().indexOf('.') !== 0 & parseFloat(data[i].wvList[j].WVWERT.toString().substring(data[i].wvList[j].WVWERT.toString().indexOf(".") - 1)) > 0) {
                                    qflag=2;
                                    break;
                                }
                            } else {
                                if (data[i].wvList[j].MEUGW != undefined & data[i].wvList[j].MEUGW != '' & data[i].wvList[j].MEUGW != 'null' & parseFloat(data[i].wvList[j].MEUGW) > parseFloat(data[i].wvList[j].WVWERT)) {
                                    qflag=2;
                                    break;
                                }else if(data[i].wvList[j].MEOGW != undefined & data[i].wvList[j].MEOGW != '' & data[i].wvList[j].MEOGW != 'null' & parseFloat(data[i].wvList[j].MEOGW) < parseFloat(data[i].wvList[j].WVWERT)){
                                    qflag=2;
                                    break;
                                }
                            }
                        }
                        if(qflag==0){
                            $('#machine'+machineId).removeClass('innerNoData').addClass('innerSuccessData');
                            $('#machine'+machineId).on("click", {machineId: machineId,qflag:0}, machineDivClick);
                        }else if(qflag==2){
                            $('#machine'+machineId).removeClass('innerNoData').addClass('innerFailData');
                            $('#machine'+machineId).on("click", {machineId: machineId,qflag:2}, machineDivClick);
                        }
                    }
                }
                removeLoading('loadingWs1');
            }
        })
    }
    function machineDivClick(event) {
        var machineId= event.data.machineId;
        $('#gobackBtn').linkbutton('enable');
        $('#qbPlPanel').panel('close');
        $('#qbChartPanel').panel('open').panel('refresh','<%=basePath%>gqb/initProcessPage?machineId='+machineId);
        var showMachineArr=new Array();
        $('#machine'+machineId+" div p").each(function (index,ele) {
            showMachineArr.push($(ele).html())
        })
        var showMachineStr=showMachineArr[0]+" / "+showMachineArr[1];
        if(event.data.qflag==="0"){
            $('#currentMachineName').parent().addClass("greenTitle");
        }else{
            $('#currentMachineName').parent().addClass("redTitle");
        }

        $('#currentMachineName').html(showMachineStr);
    }
</script>
</body>
</html>
